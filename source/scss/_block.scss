
/*
$oembed_blocks: wp-block-embed-facebook, wp-block-embed-twitter,
wp-block-embed-youtube, wp-block-embed-instagram, wp-block-embed-wordpress, wp-block-embed-soundcloud, wp-block-embed-flickr,
wp-block-embed-vimeo, wp-block-embed-animoto, wp-block-embed-cloudup, wp-block-embed-issuu, wp-block-embed-kickstarter,
wp-block-embed-mixcloud, wp-block-embed-reddit, wp-block-embed-reverbnation, wp-block-embed-screencast,
wp-block-embed-slideshare, wp-block-embed-ted, wp-block-embed-tiktok,  wp-block-embed-tumblr,
wp-block-embed-wordpress,  wp-block-embed-wordpress-tv;
*/

//wp-block-embed-spotify wp-block-embed-animoto wp-block-embed-dailymotion wp-block-embed-hulu wp-block-embed-imgur wp-block-embed-crowdsignal
//wp-block-embed-scribd wp-block-embed-scribd wp-block-embed-smugmug wp-block-embed-speakerdeck  wp-block-embed-tumblr wp-block-embed-videopress

//wp-block-video , ,

$core_blocks: wp-block-image, wp-block-gallery, wp-block-quote, wp-block-audio, wp-block-cover, wp-block-file, wp-block-video,
wp-block-code, wp-block-preformatted, wp-block-pullquote, wp-block-table, wp-block-verse, wp-block-buttons,
wp-block-columns, wp-block-separator, wp-block-spacer, wp-block-media-text, wp-block-archives,
wp-block-calendar, wp-block-categories, wp-block-latest-comments, wp-block-latest-posts, wp-block-rss,
wp-block-search, wp-block-social-links, wp-block-tag-cloud, wp-block-embed, wp-block-navigation, wp-block-group, wp-block-code, wp-block-page-list;

@each $core_block in $core_blocks {

    .enable-alignfull{
        .#{$core_block}{

            // @extend %block; defined elements.scss

            &.alignwide{
                @extend %alignwide;
            }

        }
        .is-style-alignwide,
        .editor-styles-wrapper  .wp-block[data-align="wide"],
        .edit-site .wp-block[data-align="wide"]{
            @extend %alignwide;
            position:static;
        }
        &.emulsion-has-sidebar{
            .is-style-alignfull,
            .#{$core_block}{

                &.alignfull{
                    @extend %has-sidebar-alignfull;

                    left:0;
                }
            }
            .emulsion-gb-phase-site .is-style-alignfull,
            .editor-styles-wrapper .wp-block[data-align="full"]{
                @extend %has-sidebar-alignfull;
                width:100% ! important;
                position:static!important;
                margin-left:auto;
                margin-right:auto;
                left:0;

            }
        }
        &.emulsion-no-sidebar{
            .is-style-alignfull,
            .#{$core_block}{

                &.alignfull{
                    @extend %no-sidebar-alignfull;
                }
            }
            .emulsion-gb-phase-site .is-style-alignfull,
            .editor-styles-wrapper .wp-block[data-align="full"]{
                @extend %no-sidebar-alignfull;
                width:100% ! important;
                position:static!important;
                margin-left:auto;
                margin-right:auto;

            }
        }

    }
    .#{$core_block}{
        .is-style-aligncenter,
        &.aligncenter {
            @extend %aligncenter;
        }
    }
    .#{$core_block}{
        .is-style-alignleft,
        &.alignleft{
            @extend %alignleft;
        }
    }
    .#{$core_block}{
        .is-style-alignright,
        &.alignright{
            @extend %alignright;
        }
    }
    .#{$core_block}{
        margin-left:auto;
        margin-right:auto;
    }
    .#{$core_block}__inner-container{
        overflow:hidden;
        [class|="sectionized"]{
            padding-left:0;
            padding-right:0;
            left:0;
            width:100%;
            max-width:100%;
        }
        .alignwide,
        .alignfull{
            max-width:100% ! important;
        }
        p{
            max-width:100%;
        }
        h1,h2,h3,h4,h5,h6{
            max-width:100%;
        }
        ol,ul{
            max-width:100%;
        }
        table{
            width:100%;
        }
        div,figure{
            padding-left:0;
            padding-right:0;
        }
    }

}
.alignleft.fit-align{
    min-width:25%;
    width:auto;
    &.wp-block-table{
        min-width:25%;
        width:auto;
    }
}
.alignright.fit-align{
    min-width:25%;
    width:auto;
    &.wp-block-table{
        min-width:25%;
        width:auto;
    }
}
.enable-alignfull{
    .wp-block-group{
        padding-left:0;
        padding-right:0;
        .alignfull {

            .wp-block-group__inner-container{

                [class|="sectionized"]{
                    left:0;
                    padding-left:0;
                    padding-right:0;
                }
                @each $core_block in $core_blocks {
                    .#{$core_block}{
                        &.alignfull{
                            width:100%;
                            left:0;
                            padding-left:0;
                            padding-right:0;
                        }
                    }
                }
            }
        }
    }
}
.enable-alignfull{
    &.emulsion-no-sidebar{

        .wp-block[data-align="full"]{
            // for editor

            .wp-block-columns{

                width:var(--thm_main_width);
                max-width:100%;
            }
        }
        .sectionized-wp-block-columns{

            .wp-block-columns{

                &.alignfull{

                    //   width:var(--thm_main_width);
                    max-width:100%;
                }
            }
        }
    }
}

/**
 * exception
 */

.enable-alignfull{

    .wp-block-table,
    .wp-block-media-text{
        padding-left:0;
        padding-right:0;
    }
    .wp-block-embed,
    .wp-block-image,
    .wp-block-video{
        padding-left:0;
        padding-right:0;
        video{
            padding-left:0;
            padding-right:0;
        }
        &.alignfull{
            padding-left:0;
            padding-right:0;
            video{
                padding-left:0;
                padding-right:0;
            }
        }
    }
    .wp-block-quote,
    .wp-block-verse{
        &.alignfull{
            padding-left:var(--thm_content_gap, 24px);
            padding-right:var(--thm_content_gap, 24px);
        }
    }
    .wp-block-buttons{

        padding-left:var(--thm_content_gap, 24px);
        padding-right:var(--thm_content_gap, 24px);

        .wp-block-button:not(.badge){
            padding-left:var(--thm_box_gap, 3px);
            padding-right:var(--thm_box_gap, 3px);
        }
        .wp-block-button{
            margin:var(--thm_box_gap, 3px);
            .wp-block-button__link{
                text-align:center;
                border-radius:5px;
                padding-left:var(--thm_content_gap, 24px);
                padding-right:var(--thm_content_gap, 24px);
                box-sizing:border-box;
                &:empty{
                    display:none;
                }
            }
        }
    }
    [class|="sectionized"]{
        [class|="wp-block"]{
            &.alignfull{
                max-width:100%;
                [class$="__inner-container"]{
                    max-width:100%;
                }
            }
        }
    }
    [class|="wp-block"]{

        &.alignfull{
            [class$="__inner-container"]{
                max-width:100%;
                *:not([class*="align"]){
                    max-width:100%;
                }
            }
        }
    }
}

.wp-block-categories li,
.wp-block-archives li {
    line-height: calc(var(--thm_common_font_size, 16px) * var( --thm_content_line_height, 1.5 ));
    font-size: var(--thm_meta_data_font_size);
    text-transform: var(--thm_meta_data_font_transform);

}
.wp-block-archives.is-style-list-style-inline li{
    padding:0 .6rem;
}

/**
 * Embed Wrapper
 * ========================================================================== */

.enable-alignfull .wp-block-embed.alignwide.is-type-photo,
.enable-alignfull .wp-block-embed.alignwide.is-type-rich,.enable-alignfull .wp-block-embed.alignfull.is-type-photo,
.enable-alignfull .wp-block-embed.alignfull.is-type-rich{
    margin-left:auto;
    margin-right:auto;
}
.is-type-video{
    .wp-block-embed__wrapper{
        word-wrap:normal;
        overflow-wrap:normal;
        position: relative;
        padding-bottom: 56.25%;
        height:0;
        margin-top:0;
        margin-bottom:0;
    }

    .wp-block-embed__wrapper iframe[height],
    .wp-block-embed__wrapper object[height],
    .wp-block-embed__wrapper embed[height]{
        // classic editor
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height:100%;
        max-height:100%;
    }
    .wp-block-embed__wrapper iframe:not([height]),
        .wp-block-embed__wrapper object:not([height]),
        .wp-block-embed__wrapper embed:not([height]){
        height: 100%;
    }
    .wp-block-embed__wrapper + *{
        margin-top:1em;
    }
}

/**
 * Freeform embed media
 * media is not wrapping figure
 */

.entry-content > .wp-block-embed__wrapper{
    padding-bottom: calc(var(--thm_content_width, 720px) * .5625);
}
.wp-block-embed-reverbnation{
    .wp-block-embed__wrapper{
        overflow:hidden;
        width:500px;
        height:500px;
        max-width:100%;
        margin-left:auto;
        margin-right:auto;
    }
    &.alignleft,
    &.alignright{
        margin-bottom:3rem;
    }
}
.wp-block-embed-screencast.alignfull{
    img{
        width:100%;
        height:auto;
    }
}
.wp-block-embed-twitter.alignfull{
    .twitter-tweet{
        margin-left:auto;
        margin-right:auto;
    }
}
.wp-block-embed-wordpress.alignwide,
.wp-block-embed-twitter.alignwide{
    .wp-block-embed__wrapper{
        width:-moz-fit-content;
        width:fit-content;
        margin-left:auto;
        margin-right:auto;
    }
}
.wp-block-embed-tiktok{
    //WordPress 5.4
    .wp-block-embed__wrapper{
        height:auto;
        padding-bottom:0;
    }
}
#main .wp-block-embed-instagram.alignfull{
    .instagram-media{
        margin-left:auto ! important;
        margin-right:auto ! important;
    }
}

/**
 * Case where it is necessary to overwrite the standard style
 * ========================================================================== */

.emulsion-addons-inactive body,
.full_text{
    figure.wp-block-gallery{
        ul.blocks-gallery-grid{
            padding-left:0;
            padding-right:0;

        }
    }
    & > .wp-block-archives{
        width:calc(var(--thm_content_width, 720px) - var(--thm_content_gap, 24px) * 2);
        padding-left: var(--thm_content_gap, 24px);
        padding-right: var(--thm_content_gap, 24px);
    }
    div.wp-block-archives{
        overflow:auto;
        select{
            display:block;
            position: relative;
            width:auto;
            height:auto;
            margin-left:auto;
            margin-right:auto;
            margin-top:1.5rem;
            margin-bottom:.75rem;
            padding-top:.69rem;
            padding-bottom:.69rem;
        }
    }
    /**
     * Block archives
     * ========================================================================== */
    //  [data-type="core/archives"] ul.wp-block-archives,
    & > .sectionized-wp-block-archives > ul.wp-block-archives,
    & > ul.wp-block-archives{
        font-size:var(--thm_meta_data_font_size);
        font-family:var( --thm_meta_data_font_family);
        text-transform:var(--thm_meta_data_font_transform);
        display:flex;
        overflow-x:scroll;
        overflow-y:hidden;
        height:100px;
        padding:0 0 0 0;
        margin:1.5rem auto .75rem;
        -webkit-overflow-scrolling: touch;
        position:relative;
        &.alignleft{
            //  @extend %alignleft;
        }
        &.alignright{
            //  @extend %alignright;
        }
        &::-webkit-scrollbar {
            width: 150px;
            height:.5rem;
        }
        &::-webkit-scrollbar-thumb{
            background-color: var(--thm_gray_color);
            outline: 1px solid var(--thm_gray_color);
        }
        li:before{
            content:'';
            display:block;
            position:absolute;
            top:calc( 1rem + 2px );
            width:100%;
            z-index:-1;
        }
        li{
            flex: 0 0 auto;
            width:10rem;
            list-style-type:none;
            .emulsion-archive-date{
                display:inline-block;
                transform: translate(75px,25px);
            }
            .emulsion-archive-count{
                @include font_size(6);
                white-space: pre;
                position: absolute;
            }
            .emulsion-archive-count:empty{
                height:.4rem;
                transform: translate(0,.48rem);
            }
        }
    }
    & > .sectionized-wp-block-archives > ul.wp-block-archives{
        margin-top:0;
        margin-bottom:0;
        &.alignfull{
            width:100%;
        }
    }
    /**
     * Blockquote
     * ========================================================================== */
    .wp-block-quote{
        &.is-style-large{
            margin:.75rem auto .75rem;
            padding-left:var(--thm_content_gap, 24px);
            padding-right:var(--thm_content_gap, 24px);
            @include font_size(2);
            cite{
                @include font_size(5);
                padding-left:0;
                padding-right:0;
                font-style:normal;
                font-weight:700;
                margin-top:.75rem;
                margin-bottom:.75rem;
            }
            p{
                font-style:normal;
                text-align:left;
                width: -moz-fit-content;
                width:fit-content;
                margin-top:.75rem;
                margin-bottom:.75rem;
            }
            &.has-text-align-left{
                cite,
                p{
                    text-align:left;
                    width:auto;
                    margin:.75rem 0 .75rem;
                }
            }
            &.has-text-align-right{
                cite,
                p{
                    text-align:right;
                    width:auto;
                    margin-top:.75rem;
                    margin-bottom:.75rem;
                }
            }
            &.has-text-align-center{
                cite,
                p{
                    text-align:center;
                    width:auto;
                    margin-top:.75rem;
                    margin-bottom:.75rem;
                }
            }
        }
        /* fallback Not select textalign */
        p{
            text-align:left;
            width: -moz-fit-content;
            width:fit-content;
            margin-top:.75rem;
            margin-bottom:.75rem;
        }
        cite{
            @include font_size(5);
            margin-top:.75rem;
            margin-bottom:.75rem;
        }
        &.has-text-align-left{
            cite,
            p{
                text-align:left;
                width:auto;
                margin:.75rem 0 .75rem;
            }
        }
        &.has-text-align-right{
            cite,
            p{
                text-align:right;
                width:auto;
                margin-top:.75rem;
                margin-bottom:.75rem;
            }
        }
        &.has-text-align-center{
            cite,
            p{
                text-align:center;
                width:auto;
                margin-top:.75rem;
                margin-bottom:.75rem;
            }
        }
    }
}

/**
 * Pull quote
 * ========================================================================== */

.wp-block-pullquote{

    display:flex;
    min-height:calc( var(--thm_content_width, 720px) * 0.42553 );
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position:relative;
    padding:0 0;
    text-align:left;
    margin-left:auto;
    margin-right:auto;
    cite{
        text-align:left;
        width: -moz-fit-content;
        width:fit-content;
        padding-left:var(--thm_content_gap, 24px);
        padding-right:var(--thm_content_gap, 24px);
        box-sizing:border-box;
        @include font_size(5);
    }
    p{
        margin-top:1.5rem;
        margin-bottom:.75rem;
        @include font_size(3);
        line-height:1.5;
        width:-moz-fit-content;
        width:fit-content;
    }
    &.has-regular-font-size{
        p{
            @include font_size(0);
        }
    }
    &.alignleft{
        @extend %alignleft;
        margin-top:0.75rem;
        max-width:calc( 50% - var(--thm_content_gap, 24px) * 3 );
        margin-right:calc(var(--thm_content_gap, 24px) * 2);
        margin-left:var(--thm_content_gap, 24px);
        p{

            @include font_size(3);
        }
    }
    &.alignright{
        @extend %alignright;
        margin-top:0.75rem;
        max-width:calc( 50% - var(--thm_content_gap, 24px) * 3 );
        margin-left:calc(var(--thm_content_gap, 24px) * 2);
        margin-right:var(--thm_content_gap, 24px);
        p{

            @include font_size(3);
        }
    }
    blockquote{
        margin-top:0;
        margin-bottom:0;
        margin-left:auto;
        margin-right:auto;
        max-width:100%;
        border-left:none;
        display:block;
        width:auto;
        p{
            padding-left:var(--thm_content_gap, 24px);
            padding-right:var(--thm_content_gap, 24px);
            text-align:left;
            line-height:1.5;
            width: -moz-fit-content;
            width:fit-content;
            margin-left:auto;
            margin-right:auto;
        }
        cite{
            line-height:1.5;
            text-align:left;
            width: -moz-fit-content;
            width:fit-content;
            padding-left:var(--thm_content_gap, 24px);
            padding-right:var(--thm_content_gap, 24px);
            margin-left:auto;
            margin-right:auto;
            display:block;
        }
    }
    &.is-style-solid-color{

        overflow:hidden;
        blockquote{
            max-width:100%;

        }
        p:first-of-type{
            margin-top:1.5rem;
        }
        &.is-style-solid-color{
            blockquote{
                p{
                    @include font_size(3);
                    font-weight:normal;
                }
            }
        }
        &.alignright,
        &.alignleft{
            blockquote{
                p{
                    @include font_size(3);
                    font-weight:normal;
                }
            }
        }


    }
    &.alignfull{
        p{
            line-height:1.5;
            width: -moz-fit-content;
            width:fit-content;
            margin-left:auto;
            margin-right:auto;
        }
        cite{
            width: -moz-fit-content;
            width:fit-content;
            margin-left:auto;
            margin-right:auto;
            display:block;
        }
        blockquote{
            @extend %alignwide;
        }
    }
    &.alignwide{
        p{
            line-height:1.5;
            width: -moz-fit-content;
            width:fit-content;
        }
        cite{
            width: -moz-fit-content;
            width:fit-content;
            margin-left:auto;
            margin-right:auto;
            display:block;
        }
    }
    &[class*="background-color"]:before{
        background: var(--thm_white_color);
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: -1;
    }
}

/**
 * block group
 * ========================================================================== */

body{
    &.emulsion-has-sidebar{
        .layout{
            &.has-column{
                .wp-block-group{
                    margin-bottom:0;
                    &.grid{
                        @media screen and (max-width: 1120px) {
                            --thm_main_width: calc(100vw);
                            .wp-block-group__inner-container{
                                display:block;
                                [class|="wp-block"]{
                                    margin-left:auto;
                                    margin-right:auto;
                                }
                            }
                        }
                    }
                }
            }
        }
    }

    &.emulsion-no-sidebar{
        .layout{
            .wp-block-group{
                margin-bottom:0;
                &.grid{
                    .wp-block-group__inner-container{
                        @media screen and (max-width: 768px) {
                            display:block;
                            [class|="wp-block"]{
                                margin-left:auto;
                                margin-right:auto;
                            }
                        }
                    }
                }
            }
        }
    }

    &.emulsion-gb-phase-site .editor-styles-wrapper,
    .layout{

        .wp-block-group.grid{
           --thm_content_width:720px;
            .wp-block-group__inner-container{
                margin-left:auto;
                margin-right:auto;
            }
        }
        .wp-block-group{
            &.grid{
                & > .wp-block-group__inner-container{
                    display:flex;
                    .wp-block-group__inner-container{
                        display:block;
                    }
                    flex-wrap:wrap;
                    overflow:visible;
                    padding-top:var(--thm_box_gap, 3px);
                    gap:0;
                    & > .wp-block{
                        // editor class
                        h1,h2,h3,h4,h5,h6{
                            padding-left:var(--thm_content_gap, 24px);
                            padding-right:var(--thm_content_gap, 24px);
                        }
                    }
                    & > .grid-child,
                    & > .wp-block, // editor class
                    & > [class|="wp-block"]{
                       --thm_content_width:720px;
                        margin:var(--thm_box_gap, 3px);
                        max-width:100%;

                        min-width:0;
                        box-sizing: border-box;
                        display: block;

                        margin-left: auto;
                        margin-right: auto;
                        flex: 0 1 calc( 50% - 5px - var(--thm_box_gap, 3px) * 2 );
                        &.columns-2{
                            flex: 0 1 calc( 50% - 5px - var(--thm_box_gap, 3px) * 2 );
                        }
                        &.columns-3{
                            flex: 0 1 calc( 33.33333% - 5px - var(--thm_box_gap, 3px) * 2);
                        }
                        &.columns-4{
                            flex: 0 1 calc( 24.99% - 5px - var(--thm_box_gap, 3px) * 2 );
                        }
                        &.columns-5{
                            flex: 0 1 calc( 19.99% - 5px - var(--thm_box_gap, 3px) * 2 );
                        }
                        &.size1of3 {
                            flex: 0 1 calc( 33.33333% - 5px - var(--thm_box_gap, 3px) * 2);
                        }
                        &.size1of4 {
                            flex: 0 1 calc( 24.99% - 5px - var(--thm_box_gap, 3px) * 2 );
                        }
                        &.size1of2 {
                            flex: 0 1 calc( 50% - 5px - var(--thm_box_gap, 3px) * 2 );
                        }
                        &.size1of5 {
                            flex: 0 1 calc( 19.99% - 5px - var(--thm_box_gap, 3px) * 2 );
                        }
                        &.size2of3 {
                            flex: 0 1 calc( 66.66666% - 5px - var(--thm_box_gap, 3px) * 2 );
                        }
                        &.size2of5 {
                            flex: 0 1 calc( 40% - 5px - var(--thm_box_gap, 3px) * 2 );
                        }
                        &.size3of4 {
                            flex: 0 1 calc( 75% - 5px - var(--thm_box_gap, 3px) * 2 );
                        }
                        &.size3of5 {
                            flex: 0 1 calc( 60% - 5px - var(--thm_box_gap, 3px) * 2 );
                        }
                        &.size4of5 {
                            flex: 0 1 calc( 80% - 5px - var(--thm_box_gap, 3px) * 2 );
                        }

                    }
                    .centered{
                        display:flex;
                        height:auto;
                    }
                    .wp-block-image{
                        width:100%;
                        margin:0;
                        min-height:100%;
                        img {
                            display:block;
                            max-width: 100%;
                            width: 100%;
                            height: 100%;
                            object-fit: cover;
                        }
                    }
                }
            }
        }

    }
}

.wp-block-group{
    @extend %block;
    @include clearfix;
    margin-top:1.5rem;
    margin-bottom:1.5rem;
    margin-left:auto;
    margin-right:auto;
    padding-left:0;
    padding-right:0;
    clear:both;
    float:none;
    //overflow:hidden;
    .wp-block-group__inner-container{
        width:100%;
        .wp-block-image{
            &.aligncenter.is-resized{
                display:block;
            }
        }
        .aligncenter.is-resized{
            display:block;
        }
    }
    [class|="wp-block"]:not(.alignleft):not(.alignright ),
        .wp-block-cover:not(.alignleft):not(.alignright ),
        .wp-block-gallery:not(.alignleft):not(.alignright ){
        margin-left:auto;
        margin-right:auto;

    }
    .wp-block-media-text{
        border:1px solid transparent;
    }

}
.post-template-gallery .wp-block-group{
    margin-top:calc( var(--thm_box_gap, 3px) / 2 );
    margin-bottom:calc( var(--thm_box_gap, 3px) / 2 );
}
article *:first-child.wp-block-group{
    //  margin-top:0;
}
.enable-alignfull .wp-block-group .wp-block-group__inner-container .wp-block-media-text.alignfull{
    max-width:100%;
}

/**
 * Block tag cloud
 * ========================================================================== */

.wp-block-tag-cloud{
    @extend %block;
    padding:.75rem var(--thm_content_gap, 24px);
    margin:var(--thm_content_gap, 24px) auto;
    a{
        vertical-align:middle;
    }
    & > br{
        /* add br element loop page */
        display:none;
    }
}

/**
 * Social link
 * ========================================================================== */
ul.wp-block-social-links{
    @extend %block;
    display:flex;
    justify-content: flex-start;
    padding-left: var(--thm_content_gap, 24px);
    padding-right: var(--thm_content_gap, 24px);
    margin: 1.5rem auto .75rem;
    &.alignleft{
        justify-content: flex-end;
    }

    &.has-huge-icon-size{
        &.is-style-pill-shape{
            .wp-social-link{
                width:calc( var(--thm_common_font_size, 16px) * 8 );
            }
        }
        .wp-social-link{
            width:calc( var(--thm_common_font_size, 16px) * 4 );
            height:calc( var(--thm_common_font_size, 16px) * 4 );
            a{
                svg{
                    width:calc(var(--thm_common_font_size, 16px) * 3);
                    height:calc(var(--thm_common_font_size, 16px) * 3);
                }
            }
        }
    }
    &.has-large-icon-size{
        &.is-style-pill-shape{
            .wp-social-link{
                width:calc( var(--thm_common_font_size, 16px) * 6 );
            }
        }
        .wp-social-link{
            width:calc( var(--thm_common_font_size, 16px) * 3 );
            height:calc( var(--thm_common_font_size, 16px) * 3 );
            a{
                svg{
                    width:calc(var(--thm_common_font_size, 16px) * 2);
                    height:calc(var(--thm_common_font_size, 16px) * 2);
                }
            }
        }
    }
    &.has-normal-icon-size{
        &.is-style-pill-shape{
            .wp-social-link{
                width:calc( var(--thm_common_font_size, 16px) * 4 );
            }
        }
        .wp-social-link{

            width:calc( var(--thm_common_font_size, 16px) * 2 );
        }
    }
    &.has-small-icon-size{
        &.is-style-pill-shape{
            .wp-social-link{
                width:calc( var(--thm_common_font_size, 16px) * 3 );
            }
        }
        .wp-social-link{
            width:calc( var(--thm_common_font_size, 16px) * 1.3 );
            height:calc( var(--thm_common_font_size, 16px) * 1.3 );
        }
    }

    .wp-social-link{
        list-style:none;
        height:calc( var(--thm_common_font_size, 16px) * 2 );
        text-align:center;
        width:calc( var(--thm_common_font_size, 16px) * 2 );
        display:flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin:0 .75rem .75rem 0;
        a{
            background:transparent;
            padding:0;
            svg{
                fill: var(--wp--social-links--icon-color,#fff);
                width:var(--thm_common_font_size, 16px);
                height:var(--thm_common_font_size, 16px);
            }
        }

        &.wp-social-link-wordpress{
        }
    }

    &:not(.has-icon-background-color){
        &:not(.has-icon-color){
            .wp-social-link-chain {
                border: 2px solid rgba(188,188,188,.5);
                color:var(--thm_social_icon_color);
                a{
                    svg{
                        fill:var(--thm_social_icon_color);
                    }
                }
            }
        }
    }

    &.is-style-logos-only{
        &:not(.has-icon-color){
            .wp-social-link{
                //gutenberg deactivated WordPress 5.6
                a{
                    svg{
                        fill:var(--thm_social_icon_color);
                    }
                }
            }
        }

        .wp-block-social-link.wp-social-link-chain {
            border:none;
        }
    }
}

/**
 * Block RSS
 * ========================================================================== */

@for $i from 2 through 6 {
    .wp-block-rss.is-grid.columns-#{$i} li{
        flex-basis:calc(100% / #{$i} - var(--thm_content_gap, 24px) * #{$i} );
        margin:var(--thm_box_gap);
        min-width:var(--thm_content_min_width);
    }
}
#wpbody [data-block],
body{
    ul.wp-block-rss{
        .wp-block-rss__item{
            padding-left:var(--thm_content_gap, 24px);
            padding-right:var(--thm_content_gap, 24px);
            text-indent:0;
            list-style-type:none;
            &:before{
                display:none;
            }
        }
    }
}

ul.wp-block-rss{
    font-size:var(--thm_meta_data_font_size);
    text-transform:var(--thm_meta_data_font_transform);
    padding-left:var(--thm_content_gap, 24px);
    padding-right:var(--thm_content_gap, 24px);
    .wp-block-rss__item{
        padding-left:var(--thm_content_gap, 24px);
        padding-right:var(--thm_content_gap, 24px);
        margin:var(--thm_box_gap, 3px);
        .wp-block-rss__item-author,
        .wp-block-rss__item-publish-date{
            display:inline-block;

        }
        .wp-block-rss__item-excerpt{
            @extend %block;
            padding-left:0;
            padding-right:0;
        }
    }
    &:not(.is-grid){
        .wp-block-rss__item{
            margin:1.5rem auto .75rem;
            text-indent:0;
            list-style-type:none;
        }
    }
    &.is-grid{
        display:flex;
        flex-wrap:wrap;
        justify-content: center;
        align-items: stretch;
        padding-left:var(--thm_content_gap, 24px);
        padding-right:var(--thm_content_gap, 24px);
        padding:.685rem;
        box-sizing:border-box;
        .wp-block-rss__item{
            flex: 1 1;
            margin:var(--thm_box_gap, 3px);
            display:flex;
            justify-content: center;
            align-items: center;
            flex-wrap:wrap;
            flex-direction:column;
            padding-left: calc(var(--thm_common_font_size, 16px) * var( --thm_content_line_height ) / 2);
            padding-right: calc(var(--thm_common_font_size, 16px) * var( --thm_content_line_height ) / 2);
        }
        .wp-block-rss__item-title{
            flex:1 1 auto;
            text-align:left;
            width: -moz-fit-content;
            width:fit-content;
            align-self: flex-start;
            margin:1.5rem auto .75rem;
            display:block;
            font-weight:700;
        }
        .wp-block-rss__item-excerpt{
            flex:1 1 auto;
            margin-top:1.5em;
            align-self: flex-end;
            margin-left:auto;
            margin-right:auto;
        }
    }
    li.wp-block-rss__item{
        list-style-type:none;
    }
    .wp-block-rss__item-title{
        text-align:left;
        font-size:var(--thm_common_font_size, 16px);
        font-weight:700;
        display:inline-block;
        width:100%;
        vertical-align:middle;
    }

}

/**
 *
 * ========================================================================== */

.emulsion-no-sidebar,
.emulsion-has-sidebar{
    .article-wrapper{
        article{
            margin-left:auto;
            margin-right:auto;
            footer{
                margin-left:auto;
                margin-right:auto;
            }

            .entry-content{
                .wp-block-columns{

                    .wp-block-column{
                        .alignfull{
                            width:inherit;
                            left:0;
                        }
                    }
                    .wp-block-latest-posts{
                        .wp-block-columns{
                            display:block;
                            max-width:100%;
                        }
                    }
                    .wp-block-categories{
                        li{
                            line-height: calc(var(--thm_common_font_size, 16px) * var( --thm_content_line_height, 1.5 ));
                            font-size: var(--thm_meta_data_font_size);
                            text-transform: var(--thm_meta_data_font_transform);
                            padding:0;
                            text-indent:0;
                            a{
                                display:inline-block;
                                margin-top:6px;
                                margin-bottom:6px;
                            }
                        }
                    }
                }
            }


            .wp-block-latest-posts{
                padding-left:var(--thm_content_gap, 24px);
                padding-right:var(--thm_content_gap, 24px);
                &.wp-block-latest-posts__list{
                    &.is-grid{
                        & > li{
                            .wp-block-latest-posts__featured-image{
                                max-width:calc(100% + var(--thm_content_gap, 24px) * 2 );
                                &.aligncenter{
                                    height:25vh;
                                    padding:0;
                                    img{
                                        height:25vh;
                                        width:100%;
                                        object-fit:cover;

                                    }
                                }
                            }
                        }
                    }
                    & > li{
                        --thm_content_gap:12px;
                        text-align:center;
                        position:relative;
                        overflow:hidden;

                        & > a:first-of-type{
                            // font-size:20px;
                            margin-top:.75rem;
                            margin-bottom:.75rem;
                            font-family:var(--thm_heading_font_family);
                            font-weight:var(--thm_heading_font_weight);
                            text-transform:var(--thm_heading_font_transform);
                        }
                        .wp-block-latest-posts__post-author{

                        }
                        .shortcode-wrapper{
                            margin-top:.75rem;
                            margin-bottom:.75rem;
                        }
                        .wp-block-latest-posts__featured-image{
                            display:block;
                            margin-top:calc(var(--thm_content_gap, 24px) * -1);
                            margin-left:calc(var(--thm_content_gap, 24px) * -1);
                            margin-right:calc(var(--thm_content_gap, 24px) * -1);
                            margin-bottom:calc(var(--thm_content_gap, 24px) * -1);
                            text-align:left;
                            img{
                                border:1px solid rgba(188, 188, 188, .2);
                                max-width:calc(100% + var(--thm_content_gap, 24px) * 2 );
                            }
                            &.alignright{
                                text-align:right;
                                margin-left:1rem;
                                & ~ .wp-block-latest-posts__post-author{
                                    clear:both;
                                    float:none;
                                    display:block;
                                    padding-top:1.5rem;
                                }
                            }
                            &.alignleft{
                                text-align:right;
                                margin-right:1rem;
                                & ~ .wp-block-latest-posts__post-author{
                                    clear:both;
                                    float:none;
                                    display:block;
                                    padding-top:1.5rem;

                                }
                            }
                            &.aligncenter{
                                margin-bottom:1.5rem;
                                & ~ a{
                                    display:block;
                                    margin-top:1.5rem;
                                    margin-bottom:.75rem;
                                }
                            }
                        }

                        .wp-block-latest-posts__post-excerpt{
                            text-align:left;
                            display:block;
                            width: -moz-fit-content;
                            width:fit-content;
                            margin-left:auto;
                            margin-right:auto;
                            &:empty{
                                display:none;
                            }
                            & > a:only-child{
                                /* read more link */
                            }
                            .multiline-text-overflow{
                                padding:0;
                            }
                        }
                        .wp-block-latest-posts__post-full-content{
                            text-align:left;
                            display:block;
                            width: -moz-fit-content;
                            width:fit-content;
                            max-width:100%;
                            box-sizing:border-box;
                            margin-left:auto;
                            margin-right:auto;
                            @extend %die-aligns;

                            &:empty{
                                display:none;
                            }
                            .wp-block-code{
                                code:empty:before{
                                    content:'Unable to view code';
                                }
                            }
                            [class|="sectionized"] {
                                left:0;
                            }
                            .wp-block-columns:first-child{
                                margin-top:0;
                            }
                            .wp-block-columns{
                                .wp-block-column{
                                    margin-left:0;
                                    margin-right:0;
                                }
                            }
                            .wp-block-cover{
                                max-width:100%;
                                div.wp-block-cover__inner-container{
                                    width:100%;
                                    h2,h3,h4,p,li{

                                        color:var(--thm_white_color);
                                    }

                                }
                            }
                            div.wp-block-image{
                                figure{
                                    width:100%;
                                    img{
                                        border-radius:0;
                                    }
                                }
                            }
                            .list-style-tab.success-js{
                                width:var(--thm_content_width, 720px);
                                max-width:100%;
                                li[role="tab"]{
                                    display:inline-block;
                                    width:auto;

                                }
                            }
                            .alignfull{
                                position:static;
                            }
                            li{
                                display:list-item;
                                width:100%;
                            }
                            .wp-block-latest-posts__post-date{
                                margin-left:auto;
                                margin-right:auto;
                                display:var(--thm_post_display_date);
                            }
                            .wp-block-latest-posts__post-date:after{
                                content:'\A';
                                white-space: pre;
                            }

                            .wp-block-button{
                                &.aligncenter{
                                    &.wp-block-button__link{
                                        white-space:normal;
                                    }
                                }
                            }
                            .wp-block-buttons{
                                &.aligncenter{
                                    max-width:100%;
                                }
                            }
                        }
                    }
                    &:not(.is-grid){
                        @media screen and (min-width: 960px){
                            &:not(.has-date){
                                .wp-block-latest-posts__featured-image.alignright ~ a:first-of-type,
                                    .wp-block-latest-posts__featured-image.alignleft ~ a:first-of-type{
                                    margin-top:2rem;
                                }
                            }
                            &.alignwide{
                                .wp-block-latest-posts__featured-image{

                                    width:calc(var(--thm_content_width, 720px) + 200px);
                                    .size-medium{
                                        width:calc(var(--thm_content_width, 720px) + 200px);
                                        max-width:calc(100% + var(--thm_content_gap, 24px) * 2);
                                        height:auto;
                                        margin:0 auto;

                                    }

                                    .size-large{
                                        width:calc(var(--thm_content_width, 720px) + 200px);
                                        max-width:calc(100% + var(--thm_content_gap, 24px) * 2);
                                        height:auto;
                                        margin:0 auto;

                                    }
                                }
                            }
                            &.alignfull{
                                .wp-block-latest-posts__featured-image{
                                    text-align:center;
                                    width:inherit;
                                    .size-medium{

                                        width:calc(100% + var(--thm_content_gap, 24px) * 2);
                                        max-width:calc(100% + var(--thm_content_gap, 24px) * 2);
                                        height:auto;
                                        margin:0 auto;

                                    }

                                    .size-large{

                                        width:calc(100% + var(--thm_content_gap, 24px) * 2);
                                        max-width:calc(100% + var(--thm_content_gap, 24px) * 2);
                                        height:auto;
                                        margin:0 auto;

                                    }
                                }
                            }
                            & > li{
                                overflow:hidden;
                                padding:0;
                                .wp-block-latest-posts__featured-image{
                                    width:var(--thm_content_width, 720px);
                                    max-width:100%;
                                    &.alignleft,
                                    &.alignright{
                                        margin-bottom:0;
                                        width:240px;
                                        max-width:40%;
                                    }
                                    &.aligncenter{
                                        padding:0;
                                        margin:0;
                                    }
                                    .size-thumbnail{
                                        width:150px;
                                        height:150px;
                                    }
                                    .size-medium{
                                        width:var(--thm_content_width, 720px);

                                        height:auto;
                                        margin:0 auto;

                                    }

                                    .size-large{
                                        width:var(--thm_content_width, 720px);

                                        height:auto;
                                        margin:0 auto;

                                    }


                                }
                                .wp-block-latest-posts__post-excerpt,
                                time,
                                a{
                                    z-index: 10;
                                    position: relative;
                                }
                                .wp-block-latest-posts__post-full-content,
                                .wp-block-latest-posts__post-excerpt{
                                    clear:both;
                                    padding:1rem;
                                    background:var(--thm_background_color);
                                    position:relative;
                                    left:0;
                                    margin-bottom:0;
                                    padding-top:1.5rem;
                                    padding-bottom:1.5rem;
                                }
                            }
                        }
                    }
                    &.is-grid{
                        &.columns-6,
                        &.columns-5,
                        &.columns-4,
                        &.columns-3,
                        &.columns-2,
                        &.columns-1{
                            & > li{
                                & > a:first-of-type{
                                    @include font_size(4,no-margin);
                                    margin-top:.75rem;
                                    margin-bottom:.75rem;
                                    font-family:var(--thm_heading_font_family);
                                    font-weight:var(--thm_heading_font_weight);
                                    text-transform:var(--thm_heading_font_transform);
                                }
                            }
                        }
                        & > li{
                            .wp-block-latest-posts__post-full-content{
                                @extend %die-aligns;

                                [class|="sectionized"]{
                                    max-width:100%;
                                }
                            }
                            li{
                                display:list-item;
                                width:100%;
                            }
                            .wp-block-latest-posts__post-date{
                                display:var(--thm_post_display_date);
                            }
                        }
                        .wp-block-columns{
                            display:block;
                            &.has-background{
                                padding:var(--thm_content_gap, 24px);//GB7.5 override padding
                            }
                            .wp-block-column{
                                min-width:0;//
                            }
                        }
                    }
                }
            }
        }
    }
}

/**
 * Block columns
 * ========================================================================== */

.entry-content > *:first-child.sectionized-wp-block-columns > .wp-block-column,
.entry-content > *:first-child.sectionized-wp-block-columns > .wp-block-columns{
    margin-top:0;
}

//@since 1.7.0
body [class|="sectionized"].sectionized-wp-block-columns .wp-block-columns,
div.wp-block-columns,
.emulsion-fse-active .wp-block-columns{

    @extend %block;
    margin-left:auto;
    margin-right:auto;
    padding-left:0;
    padding-right:0;
    display:flex;
    &.has-background{
        padding:0;
    }

    .wp-block-column{

        padding-left:0;
        padding-right:0;
        margin: var( --thm_box_gap, 3px );
        min-width:180px;
        max-width:100%;
        margin-left:calc(var(--thm_box_gap, 3px) * 2);
        margin-right:calc(var(--thm_box_gap, 3px) * 2);

        &:first-child,
            &:last-child{

            margin-left:0;
            margin-right:0;
        }

        .shortcode-wrapper{

            padding-left:0;
            padding-right:0;
        }
        & > [class|="wp-block"]{

            width:calc( 100% - var(--thm_content_gap, 24px) * 2 );
        }
        & > .wp-block-gallery{

            width:100%;
        }

        [class|="wp-block"]{

            margin-left:auto;
            margin-right:auto;

            &.alignfull{

                margin-left:auto;
                margin-right:auto;
                padding-left:0;
                padding-right:0;
                max-width:100%;
                position:static;
            }
        }
        .wp-block-image{
            margin-top:0;
            margin-bottom:0;
            padding-left:0;
            padding-right:0;
            max-width:100%;
        }
        .wp-block-cover{
            height:auto;
        }
        .wp-block-archives{
            display: block;
            height: auto;
            position: relative;
            margin-top:calc( 1rem - 6px );
            margin-bottom:0;
            li{
                list-style:none;
                margin-right:calc( var(--thm_box_gap, 3px) * 2 );
                margin-left:calc( var(--thm_box_gap, 3px) * 2 );
                width:initial;
                flex:initial;
                display:list-item;
                //  padding:.67rem;
                box-sizing:border-box;
                &:before{
                    display:none;
                }
                a{
                    display:inline-block;
                    transform:none;
                    margin-top:2px;
                    margin-bottom:2px;
                }
            }
        }
        .wp-block-latest-comments{
            @extend .wp-block-archives;
            margin-top:1rem;
            padding-right:0;
            padding-left:0;
            box-sizing:border-box;
            li{
                margin-bottom:calc( var(--thm_box_gap, 3px) * 2 );

            }
        }
        .wp-block-latest-posts{
            padding-left:0;
            padding-right:0;
            margin-top:1rem;
            li{
                margin-right:calc( var(--thm_box_gap, 3px) * 2 );
                margin-left:calc( var(--thm_box_gap, 3px) * 2 );
            }
        }

        .wp-block-cover{
            &.alignfull{
                position:relative;
                left:0;
                background-position:49.5% 50%;
            }
        }
        &.sidebar{
            .wp-block-latest-comments{
                li{
                }
                .wp-block-latest-comments__comment-excerpt{
                    margin-left:-48px;
                    p{
                        padding:0;
                    }
                }
            }
        }
    }
}
body [class|="sectionized"].sectionized-wp-block-columns .wp-block-columns{
    &.alignfull{
        width:100%;
    }
}

/**
 * Block latest posts
 * ========================================================================== */

.wp-block-latest-posts{
    font-size:var(--thm_meta_data_font_size);
    font-family:var( --thm_meta_data_font_family);
    text-transform:var(--thm_meta_data_font_transform);
    & > li{
        list-style:none;
        padding:.685rem;
        margin-bottom:calc( var( --thm_box_gap,3px ) * 2 );

        .wp-block-latest-posts__post-date,
        time,
        & > a{
            display:block;
            text-align:left;
            margin-left:auto;
            margin-right:auto;
            margin-top:1.5rem;
            margin-bottom:.75rem;
            width: -moz-fit-content;
            width:fit-content;
            font-weight:700;
        }
        .wp-block-latest-posts__post-excerpt{
            display:block;
            text-align:left;
            margin-left:auto;
            margin-right:auto;
            margin-top:1.5rem;
            margin-bottom:.75rem;
            width: -moz-fit-content;
            width:fit-content;
            & > a:only-child{
                //read more link
                display:block;
            }
            .shortcode-wrapper{
                //shortcode
                //gutenberg 6.8 not removing shortcode in excerpt
                ul{
                    li{
                        list-style-type: disc;
                        text-indent:0;
                        display:list-item;
                        width:initial;
                        padding-left:initial;
                        padding-right:initial;
                    }
                }
                ol{
                    li{
                        list-style-type: decimal;
                        text-indent:0;
                        display:list-item;
                        width:initial;
                        padding-left:initial;
                        padding-right:initial;
                    }
                }
            }
        }
    }
    &.is-grid{
        padding-left:var(--thm_content_gap, 24px);
        padding-right:var(--thm_content_gap, 24px);
        float:none;
        display:flex;
        flex-wrap:wrap;
        &.alignleft{
            @extend %alignleft;
        }
        &.alignright{
            @extend %alignright;
        }
        li{
            flex:1 1 auto;
            margin:var(--thm_box_gap, 3px);
            a:first-child:last-child{
                margin-top:.75rem;
            }
            .wp-block-columns{
                flex-wrap:wrap;
            }
        }
    }
    &.alignleft{
        @extend %alignleft;
    }
    &.alignright{
        @extend %alignright;
    }
}

/**
 * Gallery
 * ========================================================================== */

#document{
    .wp-block-gallery{
        .blocks-gallery-item{
            &:before{
                display:none;
            }

            figure{
                img{
                    margin:0 auto;
                }
            }

        }
    }
}

/**
 * Table
 * ========================================================================== */

.sectionized-wp-block-table{
    .alignwide,
    .alignfull{
        margin-top:1.5rem;
        margin-bottom:.75rem;
    }
}
body{//need specificity
     .wp-block-table{
         width:calc(var(--thm_content_width, 720px) - var(--thm_content_gap, 24px) * 2 );
         height:auto;
         overflow-y:hidden;
         overflow-x:auto;
         .has-fixed-layout{
             width:auto;
         }
         .has-background{
             &:before {
                 content: '';
                 width: calc( 100% - var(--thm_content_gap, 24px) * 2 - 2px);
                 background: var(--thm_white_color);
                 left: var(--thm_content_gap, 24px);
                 top: 0;
                 z-index: -1;
             }
         }
         table{
             width:calc( 100% - 2px);
             min-width:99%;
             td,
             th{
                 word-break:break-word;
                 overflow-wrap:normal;
                 -webkit-hyphens: none;
                 -moz-hyphens: none;
                 hyphens: none;
                 white-space:pre-wrap;

             }
         }
         &::-webkit-scrollbar {
             width: 0;
             height:.5em;
         }
         &.alignleft,
         &.alignright{
             display:flex;
             max-width:calc(50% - 1.5em );
             width:calc(50% - 1.5em );
             padding-left:0;
             padding-right:0;
         }
         &.alignleft{
             clear:left;
             margin:0 1em .75em .5em;
         }
         &.aligncenter{
             @extend %aligncenter;
             width: calc(var(--thm_content_width, 720px) - var(--thm_align_offset));
             padding-top:1.5em;
             padding-bottom:.75em;
             margin-top:0;
             margin-bottom:0;
         }
         &.alignright{
             clear:right;
             margin:0 .5em .75em 1em;
             position:relative;
         }
         table{
             margin-bottom:0;
             display:table;/* gutenberg table is block over written */
             tbody{
                 display:table-row-group;
             }
         }
     }

     .wp-block-table {
         /**
          * Theme Table Classes
          */
         figcaption{
             display:block;
             width: -moz-fit-content;
             width:fit-content;
             margin-left:auto;
             margin-right:auto;
             margin-bottom:.75rem;
         }
         &.caption-side-bottom{
             flex-direction:column;
             figcaption{
                 margin-top:.75rem;
             }
         }
         &.caption-side-bottom-left{
             flex-direction:column;
             figcaption{
                 margin-top:.75rem;
                 margin-left:var(--thm_content_gap, 24px);
             }
         }
         &.caption-side-left{
             figcaption{
                 margin-bottom:.75rem;
                 margin-left:var(--thm_content_gap, 24px);
             }
         }
         &.caption-side-bottom-right{
             flex-direction:column;
             figcaption{
                 margin-top:.75rem;
                 margin-right:var(--thm_content_gap, 24px);
             }
         }
         &.caption-side-right{
             figcaption{
                 margin-bottom:.75rem;
                 margin-right:var(--thm_content_gap, 24px);
             }
         }
         table{
             th {
                 padding:.7rem;
                 &.right,
                 &.left,
                 &.right,
                 &.left{
                     float:none;
                 }
             }
             td {
                 padding:.7rem;
                 p{
                     line-height:var( --thm_common_line_height, 1.15 );
                     text-align:left;
                     margin-top:.75rem;
                 }
                 p:first-child:last-child{
                     margin-top:0;
                 }
                 p:last-child{
                     margin-bottom:0;
                 }
             }
         }
         &.auto {
             table{
                 table-layout:auto;
             }
         }
         &.left{
             table{
                 float:none;
             }
         }
         &.left{
             table{
                 th,td{
                     text-align:left;
                 }
             }
         }
         &.center{
             table{
                 th,td{
                     text-align:center;
                 }
             }
         }
         &.right{
             table{
                 th,td{
                     text-align:right;
                 }
             }
         }
         /**
          * vertical align
          */
         &.top{
             table{
                 th,td{
                     vertical-align:top;
                 }
             }
         }
         &.middle{
             table{
                 th,td{
                     vertical-align:middle;
                 }
             }
         }
         &.bottom{
             table{
                 th,td{
                     vertical-align:bottom;
                 }
             }
         }
     }
}

/**
 * Block categories
 * ========================================================================== */

ul.wp-block-categories{
    padding-left:var(--thm_content_gap, 24px);
    padding-right:var(--thm_content_gap, 24px);
    font-size:var(--thm_meta_data_font_size);
    font-family:var( --thm_meta_data_font_family);
    text-transform:var(--thm_meta_data_font_transform);
    &.aligncenter,
    &.alignleft,
    &.alignright{
        max-height:19rem;
        overflow-y:scroll;
        overflow-x:hidden;
        &::-webkit-scrollbar {
            width: .5em;
            height:150px;
        }
        &::-webkit-scrollbar-thumb{
            background-color:var(--thm_gray_color);
            outline: 1px solid var(--thm_gray_color);
        }
        .aligncenter,
        ul{
            padding-left:0;
            padding-right:0;
            margin-top:0;
            margin-bottom:0;
        }
    }

    &.aligncenter{
        padding-top:0;
        padding-bottom:0;
    }

    &.wp-block-categories-list{
        &.alignfull,
        &.aligncenter{
            ul{
                position:relative;
                li{
                    &.cat-item a:after{
                        content:attr( data-title );
                        display:inline-block;
                        width:calc(100% - 17rem);
                        position:absolute;
                        left:15rem;
                        height:1.5rem;
                        white-space: nowrap;
                        overflow: hidden;
                        text-overflow: ellipsis;
                    }
                }
            }
        }
    }
    &.wp-block-categories-dropdown{
        overflow:visible;
        padding-left:var(--thm_content_gap, 24px);
        padding-right:var(--thm_content_gap, 24px);
        select{
            display:block;
            margin-left:auto;
            margin-right:auto;
        }
    }
}
.wp-block-categories-dropdown select{
    max-width:100%;
    display:block;
    position: relative;
    width:auto;
    height:auto;
    margin-left:auto;
    margin-right:auto;
    margin-top:1.5rem;
    margin-bottom:.75rem;
    padding:.69rem;
}
div.wp-block-categories.alignleft{
    //core override
    margin-right:1rem;
}
div.wp-block-categories.alignright{
    //core override
    margin-left:1rem;
}

/**
 * Media text
 * ========================================================================== */

div.wp-block-media-text > .block-editor-block-list__layout > .block-editor-block-list__block{
    //OW
    max-width:100%;
}

.wp-block-media-text{
    align-items: center;
    display: grid;
    grid-template-areas: "media-text-media media-text-content";
    grid-template-columns: 50% 50%;
    grid-template-rows: auto;
    grid-template-rows: 2;

    .wp-block-media-text__media{
        width:100%;
        overflow:hidden;
        position:relative;
        height:100%;
        &[style^="background-image"]{
            img{
                visibility:hidden;
                height:100%;
                display:block;
            }
            & > a{
                display:block;
                height:100%;
            }
        }
        & > a{
            position:absolute;
            top:50%;
            left:50%;
            transform: translate(-50%, -50%);
            width:100%;
        }
        & > img{
            position:absolute;
            top:50%;
            left:50%;
            transform: translate(-50%, -50%);
            width:100%;

        }
        &:before{
            content:'';
            display:block;
            padding-bottom:56.25%;
            height:0;
            z-index:-1;
        }
    }
    &.is-vertically-aligned-top{
        figure:not([style^="background-image"]){
            & > img,
            & > a{
                top: 0;
                left: 50%;
                transform: translate(-50%, 0);
            }
        }

    }
    &.is-vertically-aligned-middle{
        figure:not([style^="background-image"]){

        }
    }
    &.is-vertically-aligned-bottom{
        figure:not([style^="background-image"]){
            & > img,
            & > a{
                top:auto;
                bottom: 0;
                left: 0;
                transform: none;
            }
        }
    }
    .wp-block-media-text__content{
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding-left:0;
        padding-right:0;
        overflow:hidden;
        box-sizing:border-box;
        p{
            margin-bottom:0;
        }

        p:last-child{
            margin-bottom: calc(var(--thm_common_font_size, 16px) * var(--thm_content_line_height, 1.5));
        }
        h1,h2,h3,h4{
            width: -moz-fit-content;
            width:fit-content;
        }
        .wp-block-table{
            padding-left:var(--thm_content_gap, 24px);
            padding-right:var(--thm_content_gap, 24px);
        }
    }
    &.has-media-on-the-right {
        grid-template-areas: "media-text-content media-text-media";
        grid-template-columns: 50% 50%;
    }
}

/**
 * Block image
 * ========================================================================== */

figure.wp-block-image{
    //default width of no set width, alignwide, alignfull style
    width: var(--thm_content_width, 720px);
    max-width:100%;
}
div.wp-block-image{

    &.alignright,
    &.alignleft{
        /**
         * width:auto means for named image size ex..size-thumbnail
         */
        width:auto;
        figure{
            width:auto;
            img{
                position:relative;
                z-index:2;
            }
        }
        &.is-style-circle-mask{
            shape-outside: circle(50%);
            figcaption{
                width:-moz-fit-content;
                width:fit-content;
                max-width:var(--thm_content_min_width);
                margin-left:auto;
                margin-right:auto;
            }
        }
    }
    &.alignleft{
        figure{
            &.size-thumbnail{
                margin-left:var(--thm_content_gap, 24px);
            }
        }
        &.is-resized{
            margin-right:1rem;// core overwrite
            figure{
                display:table;
                figcaption{
                    display:table-caption;
                    caption-side:bottom;
                }
                &.size-thumbnail{
                    margin-left:0;
                }
            }
        }
    }
    &.alignright{
        figure{
            &.size-thumbnail{
                margin-right:var(--thm_content_gap, 24px);
            }
        }
        &.is-resized{
            margin-left:1rem;// core overwrite
            figure{
                display:table;
                figcaption{
                    display:table-caption;
                    caption-side:bottom;
                }
                &.size-thumbnail{
                    margin-right:0;
                }
            }
        }
    }
}

figure.wp-block-image{
    text-align:center;
    &.alignleft,
    &.alignright{
        margin:var(--thm_content_gap, 24px) auto;


    }


    &.is-resized{
        width:auto;
    }
    &.alignfull{
        margin-left:auto;
        margin-right:auto;
    }
    &.alignwide{
        @extend %alignwide
    }

    /* overwrite core */
    // when browser narrow width , display improperly
    figcaption{
        display:block;
    }
}


/**
 * Block first of type
 * ========================================================================== */

body .wp-block-group.alignfull:first-of-type{
    margin-top:0;
}

body .wp-block-image.alignfull:first-of-type{
    margin-top:0;
}
body .wp-block-cover.alignfull:first-of-type{

    margin-top:0;
}
.wp-block-cover{
    p.has-info-background-color:before{
        display:none;
    }

    div.wp-block-cover__inner-container{
        width:100%;
    }
}

/**
 * Blockquote lang CJK
 * ========================================================================== */

[lang="zh-HK"],
[lang="zh-TW"],
[lang="zh-CN"],
[lang="ko-KR"],
[lang="ja"]{
    .layout{
        .wp-block-quote{
            &.is-style-large{
                font-style:normal;
            }
            p{
                font-style:normal;
            }
            cite{
                font-style:normal;
            }
        }
    }
}

/**
 * block navigation
 * ========================================================================== */

.emulsion-addons-inactive .wp-block-navigation,
.full_text .wp-block-navigation{
    padding:1px;
    .wp-block-navigation__container{
        padding-right:0;
        padding-left:0;
        .wp-block-navigation-link{
            padding-top:3px;
            padding-bottom:4px;
            flex:1 1 auto;
            &.has-child{
                .wp-block-navigation__container{
                    z-index:10;
                    padding-left:0;
                }
            }
        }
    }
}

/**
 * Block file
 * ========================================================================== */

.wp-block-file{
    text-align:center;
    &.alignright{
        text-align:center;
    }
    a,
    a.wp-block-file__button{
        display:inline-block;
        margin:1.5rem .5rem .75rem;
    }
}

/**
 * Block comments
 * ========================================================================== */

.full_text{
    .wp-block-latest-comments{
        padding-left:var(--thm_box_gap, 3px);
        padding-right:var(--thm_box_gap, 3px);
        .wp-block-latest-comments__comment{
            list-style-type:none;
        }
        & > li{
            .wp-block-latest-comments__comment:before{

            }

            .wp-block-latest-comments__comment-avatar{
                border-radius: 24px;
                display: block;
                float: left;
                margin-right: 6px;
                margin-left:6px;
                width: 40px;
                height: 40px;
            }
            article{
                margin-top:0;
                .wp-block-latest-comments__comment-meta{
                    margin-top:0;
                    margin-bottom:0;
                    margin-left:0;
                    clear:none;
                    width:-moz-fit-content;
                    width:fit-content;
                    font-size:var(--thm_meta_data_font_size);
                    min-height:0;
                }
                .wp-block-latest-comments__comment-excerpt{
                    margin-left:0;
                    display:none;
                }
                time{
                    display:none;
                }
            }
        }
        &.has-avatars{
            & > li{
                article{
                    margin-left:53px;
                    width:calc(100% - 53px);
                }
            }
        }
        &.has-dates{
            & > li{
                article{
                    footer{
                        time{
                            display:block;
                        }
                    }
                }
            }
        }
        &.has-excerpts{
            & > li{
                article{
                    .wp-block-latest-comments__comment-excerpt{
                        display:block;
                    }
                }
            }
        }
    }
}

/**
 * Block calendar
 * ========================================================================== */

.wp-block-calendar{
    td{
        a{
            display:block;
        }
        &#today{
            font-weight:700;
        }

    }
}

/**
 * Block embed
 * ========================================================================== */

figure.wp-block-embed{
    .wp-block-embed__wrapper{
        text-align:center;
        & > div{
            text-align:center;
            margin-left:auto;
            margin-right:auto;
        }
    }
    iframe{
        width:100%;
    }
    img{
        object-fit:cover;
    }

}
.wp-block-code{
    //OW
    padding:0;
    > code{
        padding:1rem;
    }
}

.wp-block-group.emulsion-panel{
    overflow:hidden;
    @extend %block;
    width:calc(var(--thm_content_width, 720px) - var(--thm_content_gap, 24px) * 2);
    padding:0;
    position:relative;
    .emulsion-panel-title{
        width:100%;
        margin:0 auto;
        padding:.5rem var(--thm_content_gap, 24px);
        border:none;
        border-bottom-color:var(--thm_common_border, rgba(188,188,188,.5));
        border-bottom-style:var(--thm_common_border_style);
        border-bottom-width:var(--thm_common_border_width);

    }
    .emulsion-panel-content{
        width:100%;
        margin-top:0;
    }
}
body:not(.block-editor-page){
    .dropdown-on-hover{
        @extend %block;
        width:calc(var(--thm_content_width, 720px) - var(--thm_content_gap, 24px) * 2);
        margin-top:0;
        position:relative;

        &.alignwide{
            @extend %alignwide;
        }
        &.alignfull{
            @extend %no-sidebar-alignfull;
        }
        padding:0;
        &:focus-within,
            &:active,
            &:focus,
            &:hover{
            position:static;
            .dropdown-on-hover-content{
                visibility:visible;
                position:relative;
                border-color:var(--thm_common_border, rgba(188,188,188,.5));
                border-style:var(--thm_common_border_style);
                border-width:var(--thm_common_border_width);
            }
            .dropdown-on-hover-title{
                border-color:var(--thm_common_border, rgba(188,188,188,.5));
                border-style:var(--thm_common_border_style);
                border-width:var(--thm_common_border_width);
                border-bottom:none;
                margin-top:0;
                margin-bottom:0;
            }
        }
        .dropdown-on-hover-content{
            width:100%;
            visibility:hidden;
            //transition:visibility 1s;
            display:block;
            box-sizing:border-box;
            position:absolute;
            margin:0 auto;
            border-top:none;
        }
        .dropdown-on-hover-title{
            width:100%;
            visibility:visible;
            padding:.5em var(--thm_content_gap, 24px);
            font-weight:700;
            display:block;
            box-sizing:border-box;
            position:relative;
            margin:0 auto;
            margin-top:0;
            margin-bottom:0;
            &:hover{
                cursor:pointer;
            }

            &:after{
                margin: 0 5px;
                content: " ";
                display: inline-block;
                width: 13px;
                height: 13px;
                background-size: contain;
                vertical-align: middle;
                background-repeat: no-repeat;
                transition: all 1s ease-in-out;
                margin-left:.5rem;
            }
        }

    }
}
.dropdown-on-hover{
    .dropdown-on-hover-title{
        width:100%;
    }
    .dropdown-on-hover-content{
        width:100%;
    }
}
body:not(.block-editor-page){

    .dropdown-on-click{
        @extend %block;
        width:calc(var(--thm_content_width, 720px) - var(--thm_content_gap, 24px) * 2);
        position:relative;

        &.alignwide{
            @extend %alignwide;
        }
        &.alignfull{
            @extend %no-sidebar-alignfull;
        }
        padding:0;
        outline:none;

        &:focus-within,
            &:active,
            &:focus{
            position:static;
            .dropdown-on-click-content{
                visibility:visible;
                position:relative;
                border-color:var(--thm_common_border, rgba(188,188,188,.5));
                border-style:var(--thm_common_border_style);
                border-width:var(--thm_common_border_width);
            }
            .dropdown-on-click-title{

                border-color:var(--thm_common_border, rgba(188,188,188,.5));
                border-style:var(--thm_common_border_style);
                border-width:var(--thm_common_border_width);
                border-bottom:none;

            }
        }
        .dropdown-on-click-content{
            width:100%;
            //z-index:1;
            visibility:hidden;
            //transition:visibility 1s;
            display:block;
            box-sizing:border-box;
            position:absolute;
            margin:0 auto;
            border-top:none;
        }
        .dropdown-on-click-title{
            width:100%;
            visibility:visible;
            padding:.5em var(--thm_content_gap, 24px);
            font-weight:700;
            display:block;
            box-sizing:border-box;
            position:relative;
            margin:0 auto;
            &:hover{
                cursor:pointer;
            }


            &:after{
                margin: 0 5px;
                content: " ";
                display: inline-block;
                width: 13px;
                height: 13px;
                background-size: contain;
                vertical-align: middle;
                background-repeat: no-repeat;
                transition: all 1s ease-in-out;
                margin-left:.5rem;
            }
        }

    }
}
.dropdown-on-click{
    .dropdown-on-click-title{
        width:100%;
    }
    .dropdown-on-click-content{
        width:100%;
    }
}
body:not(.block-editor-page){
    &:not(.agent-mobile-phone){
        .modal-open-link:focus-within + .modal,
            [id|="modal-group"].is-opened,
            [id|="modal-group"]:target.modal{
            visibility:visible;
            position:fixed;
            overflow-y:auto;
            top:100px;
            right:0;
            bottom:auto;
            left:0;
            z-index:10000;
            box-shadow:0 0 32px rgba(0,0,0,.8);
            -webkit-filter: drop-shadow(0 0 32px rgba(0,0,0,.8));
            filter: drop-shadow(0 0 32px rgba(0,0,0,.8));
            &.alignwide{
                position:fixed;
            }
            &.alignfull{
                position:fixed;
            }
        }
    }
    &.agent-mobile-phone{
        .modal-open-link{
            display:none;
        }
        .wp-block-group.modal{
            position:static;
            overflow:visible;
            visibility:visible;

            .emulsion-modal-title{
                display:none;
            }
        }

    }
    .wp-block-group.modal{
        overflow:hidden;
        visibility:hidden;
        position:absolute;
        @extend %block;
        padding:0;
        background:var(--thm_background_color);
        color:var(--thm_general_text_color);

        &.alignwide{
            @extend %alignwide;
            position:absolute;
        }

        &.alignfull{
            @extend %no-sidebar-alignfull;
            position:absolute;
            .emulsion-modal-title{
                padding-left:var(--thm_content_gap, 24px);
                padding-right:var(--thm_content_gap, 24px);
            }
        }

        .emulsion-modal-title{
            width:100%;
            margin:0 auto;
            padding:.5rem;
            border:none;
            border-color:transparent;
            .modal-close-link{

                padding-left:var(--thm_content_gap, 24px);
                &:hover{
                    cursor:pointer;
                }
            }
        }

        .emulsion-modal-content{
            width:100%;
            margin-top:0;
        }
    }
}
body.emulsion-color-enable .interface-interface-skeleton__content [data-block].is-style-sticky,
.is-style-sticky{

    position: -webkit-sticky;
    position: sticky;
    top: 0;
    align-self: flex-start;
    @media screen and (max-width: 600px) {
        position:static;
    }


}
.on-scroll{
    .is-style-sticky{
        top: 100px;
    }
}

// WordPress 5.6 no activate gutenberg

.wp-block-cover-image img.wp-block-cover__image-background,
.wp-block-cover-image video.wp-block-cover__video-background,
.wp-block-cover img.wp-block-cover__image-background,
.wp-block-cover video.wp-block-cover__video-background {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    max-width: none;
    max-height: none;
    -o-object-fit: cover;
    object-fit: cover;
    outline: none;
    border: none;
    box-shadow: none;
}
/**
 * block page list
 */
.wp-block-page-list{

    .wp-block-pages-list__item{

        .wp-block-pages-list__item__link{

        }
        &.has-child{

            .submenu-container{

            }

            .wp-block-page-list__submenu-icon{
                svg{

                }
                & ~ .submenu-container{

                }
            }
        }
    }
}
